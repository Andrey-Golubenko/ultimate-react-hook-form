import{m as Je,j as g,A as p,r as f,k as mr,P as gr,T as ye,H as vr,J as yr,K as br,M as hr}from"./vendor-b73bc09a.js";import{u as Dr,o as xr,C as wr,d as Ar}from"./validatingSchemas-8376331d.js";import{F as Fr}from"./FileList-1cc26532.js";import{M as Er,u as Or}from"./index-06633898.js";import{N as jr}from"./NavButtons-f5941790.js";import"./get-video-id.esm-6ba5b9cc.js";const _r=Je(g.jsx("path",{d:"m20.54 5.23-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27zM12 17.5 6.5 12H10v-2h4v2h3.5L12 17.5zM5.12 5l.81-1h12l.94 1H5.12z"}),"Archive"),Cr=Je(g.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"}),"CloudUpload");function K(e,r,t,n){function i(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function c(m){try{l(n.next(m))}catch(y){u(y)}}function d(m){try{l(n.throw(m))}catch(y){u(y)}}function l(m){m.done?o(m.value):i(m.value).then(c,d)}l((n=n.apply(e,r||[])).next())})}function H(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function c(l){return function(m){return d([l,m])}}function d(l){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,l[0]&&(t=0)),t;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=r.call(e,t)}catch(m){l=[6,m],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Le(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],u;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){u={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(u)throw u.error}}return o}function $e(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))}var Sr=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Y(e,r){var t=Pr(e);if(typeof t.path!="string"){var n=e.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof r=="string"?r:typeof n=="string"&&n.length>0?n:e.name,writable:!1,configurable:!1,enumerable:!0})}return t}function Pr(e){var r=e.name,t=r&&r.lastIndexOf(".")!==-1;if(t&&!e.type){var n=r.split(".").pop().toLowerCase(),i=Sr.get(n);i&&Object.defineProperty(e,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return e}var Ir=[".DS_Store","Thumbs.db"];function Tr(e){return K(this,void 0,void 0,function(){return H(this,function(r){return re(e)&&kr(e.dataTransfer)?[2,Lr(e.dataTransfer,e.type)]:Rr(e)?[2,zr(e)]:Array.isArray(e)&&e.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,Mr(e)]:[2,[]]})})}function kr(e){return re(e)}function Rr(e){return re(e)&&re(e.target)}function re(e){return typeof e=="object"&&e!==null}function zr(e){return be(e.target.files).map(function(r){return Y(r)})}function Mr(e){return K(this,void 0,void 0,function(){var r;return H(this,function(t){switch(t.label){case 0:return[4,Promise.all(e.map(function(n){return n.getFile()}))];case 1:return r=t.sent(),[2,r.map(function(n){return Y(n)})]}})})}function Lr(e,r){return K(this,void 0,void 0,function(){var t,n;return H(this,function(i){switch(i.label){case 0:return e.items?(t=be(e.items).filter(function(o){return o.kind==="file"}),r!=="drop"?[2,t]:[4,Promise.all(t.map($r))]):[3,2];case 1:return n=i.sent(),[2,Ke(Xe(n))];case 2:return[2,Ke(be(e.files).map(function(o){return Y(o)}))]}})})}function Ke(e){return e.filter(function(r){return Ir.indexOf(r.name)===-1})}function be(e){if(e===null)return[];for(var r=[],t=0;t<e.length;t++){var n=e[t];r.push(n)}return r}function $r(e){if(typeof e.webkitGetAsEntry!="function")return He(e);var r=e.webkitGetAsEntry();return r&&r.isDirectory?Ze(r):He(e)}function Xe(e){return e.reduce(function(r,t){return $e($e([],Le(r),!1),Le(Array.isArray(t)?Xe(t):[t]),!1)},[])}function He(e){var r=e.getAsFile();if(!r)return Promise.reject("".concat(e," is not a File"));var t=Y(r);return Promise.resolve(t)}function Kr(e){return K(this,void 0,void 0,function(){return H(this,function(r){return[2,e.isDirectory?Ze(e):Hr(e)]})})}function Ze(e){var r=e.createReader();return new Promise(function(t,n){var i=[];function o(){var u=this;r.readEntries(function(c){return K(u,void 0,void 0,function(){var d,l,m;return H(this,function(y){switch(y.label){case 0:if(c.length)return[3,5];y.label=1;case 1:return y.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return d=y.sent(),t(d),[3,4];case 3:return l=y.sent(),n(l),[3,4];case 4:return[3,6];case 5:m=Promise.all(c.map(Kr)),i.push(m),o(),y.label=6;case 6:return[2]}})})},function(c){n(c)})}o()})}function Hr(e){return K(this,void 0,void 0,function(){return H(this,function(r){return[2,new Promise(function(t,n){e.file(function(i){var o=Y(i,e.fullPath);t(o)},function(i){n(i)})})]})})}var Br=function(e,r){if(e&&r){var t=Array.isArray(r)?r:r.split(","),n=e.name||"",i=(e.type||"").toLowerCase(),o=i.replace(/\/.*$/,"");return t.some(function(u){var c=u.trim().toLowerCase();return c.charAt(0)==="."?n.toLowerCase().endsWith(c):c.endsWith("/*")?o===c.replace(/\/.*$/,""):i===c})}return!0};function Be(e){return Nr(e)||Ur(e)||er(e)||Wr()}function Wr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ur(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Nr(e){if(Array.isArray(e))return he(e)}function We(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,n)}return t}function Ue(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?We(Object(t),!0).forEach(function(n){Qe(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):We(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Qe(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function N(e,r){return Vr(e)||Gr(e,r)||er(e,r)||Yr()}function Yr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function er(e,r){if(e){if(typeof e=="string")return he(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return he(e,r)}}function he(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Gr(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],i=!0,o=!1,u,c;try{for(t=t.call(e);!(i=(u=t.next()).done)&&(n.push(u.value),!(r&&n.length===r));i=!0);}catch(d){o=!0,c=d}finally{try{!i&&t.return!=null&&t.return()}finally{if(o)throw c}}return n}}function Vr(e){if(Array.isArray(e))return e}var qr="file-invalid-type",Jr="file-too-large",Xr="file-too-small",Zr="too-many-files",Qr=function(r){r=Array.isArray(r)&&r.length===1?r[0]:r;var t=Array.isArray(r)?"one of ".concat(r.join(", ")):r;return{code:qr,message:"File type must be ".concat(t)}},Ne=function(r){return{code:Jr,message:"File is larger than ".concat(r," ").concat(r===1?"byte":"bytes")}},Ye=function(r){return{code:Xr,message:"File is smaller than ".concat(r," ").concat(r===1?"byte":"bytes")}},et={code:Zr,message:"Too many files"};function rr(e,r){var t=e.type==="application/x-moz-file"||Br(e,r);return[t,t?null:Qr(r)]}function tr(e,r,t){if(k(e.size))if(k(r)&&k(t)){if(e.size>t)return[!1,Ne(t)];if(e.size<r)return[!1,Ye(r)]}else{if(k(r)&&e.size<r)return[!1,Ye(r)];if(k(t)&&e.size>t)return[!1,Ne(t)]}return[!0,null]}function k(e){return e!=null}function rt(e){var r=e.files,t=e.accept,n=e.minSize,i=e.maxSize,o=e.multiple,u=e.maxFiles,c=e.validator;return!o&&r.length>1||o&&u>=1&&r.length>u?!1:r.every(function(d){var l=rr(d,t),m=N(l,1),y=m[0],_=tr(d,n,i),P=N(_,1),C=P[0],w=c?c(d):null;return y&&C&&!w})}function te(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function ee(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(r){return r==="Files"||r==="application/x-moz-file"}):!!e.target&&!!e.target.files}function Ge(e){e.preventDefault()}function tt(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function nt(e){return e.indexOf("Edge/")!==-1}function ot(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return tt(e)||nt(e)}function j(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(n){for(var i=arguments.length,o=new Array(i>1?i-1:0),u=1;u<i;u++)o[u-1]=arguments[u];return r.some(function(c){return!te(n)&&c&&c.apply(void 0,[n].concat(o)),te(n)})}}function it(){return"showOpenFilePicker"in window}function at(e){if(k(e)){var r=Object.entries(e).filter(function(t){var n=N(t,2),i=n[0],o=n[1],u=!0;return nr(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),u=!1),(!Array.isArray(o)||!o.every(or))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),u=!1),u}).reduce(function(t,n){var i=N(n,2),o=i[0],u=i[1];return Ue(Ue({},t),{},Qe({},o,u))},{});return[{description:"Files",accept:r}]}return e}function ct(e){if(k(e))return Object.entries(e).reduce(function(r,t){var n=N(t,2),i=n[0],o=n[1];return[].concat(Be(r),[i],Be(o))},[]).filter(function(r){return nr(r)||or(r)}).join(",")}function ut(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function st(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function nr(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function or(e){return/^.*\.[\w]+$/.test(e)}var lt=["children"],ft=["open"],pt=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],dt=["refKey","onChange","onClick"];function mt(e){return yt(e)||vt(e)||ir(e)||gt()}function gt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function yt(e){if(Array.isArray(e))return De(e)}function ve(e,r){return Dt(e)||ht(e,r)||ir(e,r)||bt()}function bt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ir(e,r){if(e){if(typeof e=="string")return De(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return De(e,r)}}function De(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function ht(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],i=!0,o=!1,u,c;try{for(t=t.call(e);!(i=(u=t.next()).done)&&(n.push(u.value),!(r&&n.length===r));i=!0);}catch(d){o=!0,c=d}finally{try{!i&&t.return!=null&&t.return()}finally{if(o)throw c}}return n}}function Dt(e){if(Array.isArray(e))return e}function Ve(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,n)}return t}function v(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Ve(Object(t),!0).forEach(function(n){xe(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ve(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function xe(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ne(e,r){if(e==null)return{};var t=xt(e,r),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}function xt(e,r){if(e==null)return{};var t={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(r.indexOf(i)>=0)&&(t[i]=e[i]);return t}var Ae=f.forwardRef(function(e,r){var t=e.children,n=ne(e,lt),i=cr(n),o=i.open,u=ne(i,ft);return f.useImperativeHandle(r,function(){return{open:o}},[o]),mr.createElement(f.Fragment,null,t(v(v({},u),{},{open:o})))});Ae.displayName="Dropzone";var ar={disabled:!1,getFilesFromEvent:Tr,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Ae.defaultProps=ar;Ae.propTypes={children:p.func,accept:p.objectOf(p.arrayOf(p.string)),multiple:p.bool,preventDropOnDocument:p.bool,noClick:p.bool,noKeyboard:p.bool,noDrag:p.bool,noDragEventsBubbling:p.bool,minSize:p.number,maxSize:p.number,maxFiles:p.number,disabled:p.bool,getFilesFromEvent:p.func,onFileDialogCancel:p.func,onFileDialogOpen:p.func,useFsAccessApi:p.bool,autoFocus:p.bool,onDragEnter:p.func,onDragLeave:p.func,onDragOver:p.func,onDrop:p.func,onDropAccepted:p.func,onDropRejected:p.func,onError:p.func,validator:p.func};var we={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function cr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=v(v({},ar),e),t=r.accept,n=r.disabled,i=r.getFilesFromEvent,o=r.maxSize,u=r.minSize,c=r.multiple,d=r.maxFiles,l=r.onDragEnter,m=r.onDragLeave,y=r.onDragOver,_=r.onDrop,P=r.onDropAccepted,C=r.onDropRejected,w=r.onFileDialogCancel,E=r.onFileDialogOpen,S=r.useFsAccessApi,R=r.autoFocus,h=r.preventDropOnDocument,Fe=r.noClick,oe=r.noKeyboard,Ee=r.noDrag,I=r.noDragEventsBubbling,ie=r.onError,B=r.validator,W=f.useMemo(function(){return ct(t)},[t]),Oe=f.useMemo(function(){return at(t)},[t]),ae=f.useMemo(function(){return typeof E=="function"?E:qe},[E]),G=f.useMemo(function(){return typeof w=="function"?w:qe},[w]),x=f.useRef(null),O=f.useRef(null),ur=f.useReducer(wt,we),je=ve(ur,2),ce=je[0],A=je[1],sr=ce.isFocused,_e=ce.isFileDialogActive,V=f.useRef(typeof window<"u"&&window.isSecureContext&&S&&it()),Ce=function(){!V.current&&_e&&setTimeout(function(){if(O.current){var s=O.current.files;s.length||(A({type:"closeDialog"}),G())}},300)};f.useEffect(function(){return window.addEventListener("focus",Ce,!1),function(){window.removeEventListener("focus",Ce,!1)}},[O,_e,G,V]);var z=f.useRef([]),Se=function(s){x.current&&x.current.contains(s.target)||(s.preventDefault(),z.current=[])};f.useEffect(function(){return h&&(document.addEventListener("dragover",Ge,!1),document.addEventListener("drop",Se,!1)),function(){h&&(document.removeEventListener("dragover",Ge),document.removeEventListener("drop",Se))}},[x,h]),f.useEffect(function(){return!n&&R&&x.current&&x.current.focus(),function(){}},[x,R,n]);var T=f.useCallback(function(a){ie?ie(a):console.error(a)},[ie]),Pe=f.useCallback(function(a){a.preventDefault(),a.persist(),Z(a),z.current=[].concat(mt(z.current),[a.target]),ee(a)&&Promise.resolve(i(a)).then(function(s){if(!(te(a)&&!I)){var b=s.length,D=b>0&&rt({files:s,accept:W,minSize:u,maxSize:o,multiple:c,maxFiles:d,validator:B}),F=b>0&&!D;A({isDragAccept:D,isDragReject:F,isDragActive:!0,type:"setDraggedFiles"}),l&&l(a)}}).catch(function(s){return T(s)})},[i,l,T,I,W,u,o,c,d,B]),Ie=f.useCallback(function(a){a.preventDefault(),a.persist(),Z(a);var s=ee(a);if(s&&a.dataTransfer)try{a.dataTransfer.dropEffect="copy"}catch{}return s&&y&&y(a),!1},[y,I]),Te=f.useCallback(function(a){a.preventDefault(),a.persist(),Z(a);var s=z.current.filter(function(D){return x.current&&x.current.contains(D)}),b=s.indexOf(a.target);b!==-1&&s.splice(b,1),z.current=s,!(s.length>0)&&(A({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),ee(a)&&m&&m(a))},[x,m,I]),q=f.useCallback(function(a,s){var b=[],D=[];a.forEach(function(F){var U=rr(F,W),$=ve(U,2),se=$[0],le=$[1],fe=tr(F,u,o),Q=ve(fe,2),pe=Q[0],de=Q[1],me=B?B(F):null;if(se&&pe&&!me)b.push(F);else{var ge=[le,de];me&&(ge=ge.concat(me)),D.push({file:F,errors:ge.filter(function(dr){return dr})})}}),(!c&&b.length>1||c&&d>=1&&b.length>d)&&(b.forEach(function(F){D.push({file:F,errors:[et]})}),b.splice(0)),A({acceptedFiles:b,fileRejections:D,type:"setFiles"}),_&&_(b,D,s),D.length>0&&C&&C(D,s),b.length>0&&P&&P(b,s)},[A,c,W,u,o,d,_,P,C,B]),J=f.useCallback(function(a){a.preventDefault(),a.persist(),Z(a),z.current=[],ee(a)&&Promise.resolve(i(a)).then(function(s){te(a)&&!I||q(s,a)}).catch(function(s){return T(s)}),A({type:"reset"})},[i,q,T,I]),M=f.useCallback(function(){if(V.current){A({type:"openDialog"}),ae();var a={multiple:c,types:Oe};window.showOpenFilePicker(a).then(function(s){return i(s)}).then(function(s){q(s,null),A({type:"closeDialog"})}).catch(function(s){ut(s)?(G(s),A({type:"closeDialog"})):st(s)?(V.current=!1,O.current?(O.current.value=null,O.current.click()):T(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):T(s)});return}O.current&&(A({type:"openDialog"}),ae(),O.current.value=null,O.current.click())},[A,ae,G,S,q,T,Oe,c]),ke=f.useCallback(function(a){!x.current||!x.current.isEqualNode(a.target)||(a.key===" "||a.key==="Enter"||a.keyCode===32||a.keyCode===13)&&(a.preventDefault(),M())},[x,M]),Re=f.useCallback(function(){A({type:"focus"})},[]),ze=f.useCallback(function(){A({type:"blur"})},[]),Me=f.useCallback(function(){Fe||(ot()?setTimeout(M,0):M())},[Fe,M]),L=function(s){return n?null:s},ue=function(s){return oe?null:L(s)},X=function(s){return Ee?null:L(s)},Z=function(s){I&&s.stopPropagation()},lr=f.useMemo(function(){return function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=a.refKey,b=s===void 0?"ref":s,D=a.role,F=a.onKeyDown,U=a.onFocus,$=a.onBlur,se=a.onClick,le=a.onDragEnter,fe=a.onDragOver,Q=a.onDragLeave,pe=a.onDrop,de=ne(a,pt);return v(v(xe({onKeyDown:ue(j(F,ke)),onFocus:ue(j(U,Re)),onBlur:ue(j($,ze)),onClick:L(j(se,Me)),onDragEnter:X(j(le,Pe)),onDragOver:X(j(fe,Ie)),onDragLeave:X(j(Q,Te)),onDrop:X(j(pe,J)),role:typeof D=="string"&&D!==""?D:"presentation"},b,x),!n&&!oe?{tabIndex:0}:{}),de)}},[x,ke,Re,ze,Me,Pe,Ie,Te,J,oe,Ee,n]),fr=f.useCallback(function(a){a.stopPropagation()},[]),pr=f.useMemo(function(){return function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=a.refKey,b=s===void 0?"ref":s,D=a.onChange,F=a.onClick,U=ne(a,dt),$=xe({accept:W,multiple:c,type:"file",style:{display:"none"},onChange:L(j(D,J)),onClick:L(j(F,fr)),tabIndex:-1},b,O);return v(v({},$),U)}},[O,t,c,J,n]);return v(v({},ce),{},{isFocused:sr&&!n,getRootProps:lr,getInputProps:pr,rootRef:x,inputRef:O,open:L(M)})}function wt(e,r){switch(r.type){case"focus":return v(v({},e),{},{isFocused:!0});case"blur":return v(v({},e),{},{isFocused:!1});case"openDialog":return v(v({},we),{},{isFileDialogActive:!0});case"closeDialog":return v(v({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return v(v({},e),{},{isDragActive:r.isDragActive,isDragAccept:r.isDragAccept,isDragReject:r.isDragReject});case"setFiles":return v(v({},e),{},{acceptedFiles:r.acceptedFiles,fileRejections:r.fileRejections});case"reset":return v({},we);default:return e}}function qe(){}const At=({name:e,setValue:r,register:t,watch:n,validatErrors:i,duplicates:o,setDuplicates:u})=>{f.useEffect(()=>{t(e)},[t,e]);const c=n(e),d=f.useCallback(w=>{const E=c==null?void 0:c.map(h=>h.name),S=w.filter(h=>E==null?void 0:E.includes(h==null?void 0:h.name)).map(h=>h==null?void 0:h.name),R=w.filter(h=>!(E!=null&&E.includes(h==null?void 0:h.name)));if(u(()=>[...S]),R.length){const h=!!(c!=null&&c.length)&&[...c].concat(R)||R;r(e,h)}},[c,r,e,u]),{getRootProps:l,getInputProps:m}=cr({onDrop:d}),y=f.useCallback(w=>{const E=c.filter(S=>(S==null?void 0:S.name)!==w);r(e,E,{shouldValidate:!0})},[r,e,c]),{onBlur:_,onChange:P}=t(e),C=o&&o.length>0?"s":"";return g.jsxs(g.Fragment,{children:[g.jsxs(gr,{variant:"outlined",...l(),sx:{backgroundColor:"#eee",textAlign:"center",cursor:"pointer",color:"#333",padding:"10px",margin:"2.5rem 0"},children:[g.jsx(Cr,{sx:{marginTop:"16px",color:"#888",fontSize:"42px"}}),g.jsx("input",{name:e,id:e,"data-testid":e,multiple:!0,accept:"image/*,.pdf,.csv,.xlsx,.txt",...m({onBlur:_,onChange:P})}),g.jsxs("p",{children:["Drag and drop files here, or click to select files. The file size should be no more than ",(Er/1024).toFixed()||0," Mb."]})]}),i&&g.jsx(ye,{variant:"body2",component:"p",className:"Mui-error",sx:{color:"red",mb:"1rem"},children:i==null?void 0:i.message}),!!(o!=null&&o.length)&&g.jsxs(g.Fragment,{children:[g.jsx(ye,{variant:"body2",sx:{color:"red",fontSize:"1.25rem"},children:`You tried to upload file${C} with duplicated name${C}:`}),g.jsx(vr,{children:o.map(w=>g.jsxs(yr,{children:[g.jsx(br,{children:g.jsx(_r,{fontSize:"small",sx:{color:"red"}})}),g.jsx(hr,{secondary:w,sx:{display:"flex",alignItems:"center","& .MuiListItemText-secondary":{fontSize:"1.2rem",color:"#d32f2f"}}})]},w))})]}),!!(c!=null&&c.length)&&g.jsx(Fr,{files:c,handleDelete:y})]})},St=f.forwardRef(({saveData:e},r)=>{const{formData:t,setFormValue:n}=Or(),{handleSubmit:i,setValue:o,register:u,watch:c,formState:{errors:d}}=Dr({defaultValues:{loadFiles:t==null?void 0:t.loadFiles},resolver:xr(Ar)}),[l,m]=f.useState([]),y=e||(_=>{n({..._,isDataReceived:!0})});return g.jsxs(g.Fragment,{children:[g.jsx(ye,{variant:"h5",children:"Upload your files"}),g.jsxs(wr,{onSubmit:i(y),children:[g.jsx(At,{name:"loadFiles",setValue:o,register:u,watch:c,validatErrors:d==null?void 0:d.loadFiles,duplicates:l,setDuplicates:m}),g.jsx(jr,{ref:r})]})]})});export{St as default};
